<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Organization Portal</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    :root {
      --primary-color: #4BABB1; /* ÿßŸÑŸÑŸàŸÜ ÿßŸÑÿ£ÿ≥ÿßÿ≥Ÿä */
      --primary-light: #E6F7F9; /* ÿßŸÑŸÑŸàŸÜ ÿßŸÑÿ£ÿ≥ÿßÿ≥Ÿä ÿßŸÑŸÅÿßÿ™ÿ≠ */
      --primary-dark: #3A8A90; /* ÿßŸÑŸÑŸàŸÜ ÿßŸÑÿ£ÿ≥ÿßÿ≥Ÿä ÿßŸÑÿØÿßŸÉŸÜ */
      --bg-light: #FFFFFF; /* ÿÆŸÑŸÅŸäÿßÿ™ ÿßŸÑÿπŸÜÿßÿµÿ± */
      --bg-gray: #F5F7FA; /* ÿÆŸÑŸÅŸäÿ© ÿßŸÑÿµŸÅÿ≠ÿ© */
      --text-primary: #2D3748; /* ÿßŸÑŸÜÿµŸàÿµ ÿßŸÑÿ£ÿ≥ÿßÿ≥Ÿäÿ© */
      --text-secondary: #718096; /* ÿßŸÑŸÜÿµŸàÿµ ÿßŸÑÿ´ÿßŸÜŸàŸäÿ© */
      --text-light: #A0AEC0; /* ŸÜÿµŸàÿµ ÿÆŸÅŸäŸÅÿ© */
      --border-color: #E2E8F0; /* ÿ≠ÿØŸàÿØ */
      --shadow-color: rgba(0, 0, 0, 0.1); /* ÿ∏ŸÑÿßŸÑ */
      --success-color: #4CAF50; /* ŸÑŸàŸÜ ÿßŸÑŸÜÿ¨ÿßÿ≠ */
      --danger-color: #f44336; /* ŸÑŸàŸÜ ÿßŸÑÿÆÿ∑ÿ± */
    }
    * { 
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    
    body {
      font-family: 'Inter', sans-serif;
      background-color: var(--bg-gray);
      min-height: 100vh;
      display: flex;
      transition: all 0.4s ease;
    }

    /* üî• Sidebar Styles */
    .sidebar {
      width: 280px;
      height: 95vh;
      position: fixed;
      top: 2.5vh;
      left: 20px;
      background: var(--bg-light);
      border-radius: 16px;
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
      transition: all 0.4s ease;
      z-index: 100;
      display: flex;
      flex-direction: column;
      overflow: hidden;
    }
    
    .sidebar.closed {
      transform: translateX(-100%);
      opacity: 0;
      pointer-events: none;
    }
    
    .sidebar-header {
      padding: 24px;
      border-bottom: 1px solid rgba(0, 0, 0, 0.05);
      text-align: center;
    }
    
    .project-name {
      font-size: 1.25rem;
      font-weight: 600;
      color: var(--text-primary);
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
    }
    
    .project-name i {
      color: var(--primary-color);
      font-size: 1.5rem;
    }
    
    .menu-items {
      flex: 1;
      padding: 16px 0;
      overflow-y: auto;
    }
    
    .menu-item {
      display: flex;
      align-items: center;
      padding: 16px 24px;
      color: var(--text-primary);
      text-decoration: none;
      transition: all 0.2s;
      position: relative;
      margin: 8px 12px;
      border-radius: 8px;
    }
    
    .menu-item:hover {
      color: var(--primary-color);
      background: rgba(75, 171, 177, 0.08);
      transform: translateX(5px);
    }
    
    .menu-item.active {
      color: var(--primary-color);
      font-weight: 500;
      background: rgba(75, 171, 177, 0.1);
    }
    
    .menu-item.active::before {
      content: '';
      position: absolute;
      left: 0;
      top: 0;
      height: 100%;
      width: 4px;
      background: var(--primary-color);
      border-radius: 0 4px 4px 0;
    }
    
    .menu-item i {
      margin-right: 12px;
      font-size: 1.1rem;
      width: 24px;
      text-align: center;
    }
    
    /* Toggle Button */
    .toggle-btn {
      position: fixed;
      top: 28px;
      left: 28px;
      width: 40px;
      height: 40px;
      background: var(--bg-light);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      z-index: 101;
      transition: all 0.3s;
      border: none;
      outline: none;
    }
    
    .toggle-btn:hover {
      transform: scale(1.1);
      box-shadow: 0 6px 16px rgba(0, 0, 0, 0.15);
    }
    
    .toggle-btn i {
      color: var(--primary-color);
      transition: transform 0.3s;
      font-size: 1.2rem;
    }
    
    .sidebar:not(.closed) ~ .toggle-btn {
      left: 300px;
    }
    
    .sidebar:not(.closed) ~ .toggle-btn i {
      transform: rotate(180deg);
    }
    
    /* Main Content Area */
    .main {
      flex: 1;
      padding: 40px;
      margin-left: 320px;
      width: calc(100% - 320px);
      transition: all 0.4s ease;
      overflow-y: auto;
      height: 100vh;
    }
    
    .sidebar.closed ~ .main {
      margin-left: 0;
      width: 100%;
    }

    /* Header */
    .header {
      background: linear-gradient(to right, var(--primary-light), var(--primary-color));
      padding: 25px;
      border-radius: 12px;
      margin-bottom: 30px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      color: white;
    }

    h1 {
      margin: 0;
      font-size: 28px;
      font-weight: 700;
    }

    .header p {
      margin-top: 8px;
      opacity: 0.9;
    }

    /* Cards */
    .cards {
      display: flex;
      gap: 20px;
      margin: 20px 0;
      flex-wrap: wrap;
    }

    .card {
      background: var(--bg-light);
      border-radius: 16px;
      padding: 30px;
      margin-bottom: 30px;
      box-shadow: 0 4px 20px var(--shadow-color);
      transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
      position: relative;
      overflow: hidden;
      opacity: 0;
      transform: translateY(30px);
      animation: fadeInUp 0.6s ease-out forwards;
    }
    
    @keyframes fadeInUp {
      from { opacity: 0; transform: translateY(30px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    .card:nth-child(1) { animation-delay: 0.1s; }
    .card:nth-child(2) { animation-delay: 0.3s; }
    .card:nth-child(3) { animation-delay: 0.5s; }
    
    .card:hover {
      transform: translateY(-10px) scale(1.01);
      box-shadow: 0 15px 35px rgba(75, 171, 177, 0.2);
    }
    
    .card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 5px;
      background: var(--primary-color);
      transform: scaleX(0);
      transform-origin: left;
      transition: transform 0.6s ease;
    }
    
    .card:hover::before {
      transform: scaleX(1);
    }
    
    .card h2, .card h3 {
      color: var(--text-primary);
      margin-bottom: 20px;
      position: relative;
      display: inline-block;
    }
    
    .card h2::after, .card h3::after {
      content: '';
      position: absolute;
      bottom: -8px;
      left: 0;
      width: 50px;
      height: 3px;
      background: var(--primary-color);
      transition: width 0.4s ease;
    }
    
    .card:hover h2::after, .card:hover h3::after {
      width: 100px;
    }

    /* Profile Section */
    .profile-section {
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
      margin-bottom: 30px;
    }
    
    .profile-img {
      width: 120px;
      height: 120px;
      border-radius: 50%;
      object-fit: cover;
      border: 5px solid var(--primary-color);
      box-shadow: 0 5px 15px rgba(75, 171, 177, 0.3);
      transition: all 0.4s ease;
      background: linear-gradient(45deg, #e0f7fa, #b2ebf2);
    }
    
    .profile-img:hover {
      transform: scale(1.05);
      box-shadow: 0 8px 25px rgba(75, 171, 177, 0.4);
    }
    
    .profile-btn {
      background: var(--primary-color);
      color: white;
      border: none;
      padding: 12px 30px;
      border-radius: 30px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 4px 15px rgba(75, 171, 177, 0.3);
      margin-top: 20px;
      text-decoration: none;
      display: inline-block;
    }
    
    .profile-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 25px rgba(75, 171, 177, 0.4);
      background: var(--primary-dark);
    }

    /* Charts */
    .charts {
      display: flex;
      gap: 20px;
      flex-wrap: wrap;
      margin-top: 30px;
    }

    .chart-container {
      background: var(--bg-light);
      padding: 20px;
      border-radius: 12px;
      min-width: 220px;
      flex: 1;
      text-align: center;
      box-shadow: 0 4px 12px rgba(0,0,0,0.05);
      position: relative;
      transition: all 0.3s ease;
    }
    
    .sidebar.closed ~ .main .chart-container {
      min-width: 250px;
    }

    .chart-label {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 18px;
      font-weight: bold;
      color: var(--primary-color);
    }

    /* Tables and Lists */
    .toppers, .library, .announcements {
      background: var(--bg-light);
      border-radius: 16px;
      padding: 25px;
      margin-bottom: 30px;
      box-shadow: 0 4px 20px var(--shadow-color);
    }

    table {
      width: 100%;
      border-collapse: collapse;
      background: var(--bg-light);
      border-radius: 12px;
      overflow: hidden;
      margin-top: 20px;
    }

    th {
      background-color: var(--primary-color);
      color: white;
      font-weight: 500;
      padding: 15px;
      text-align: left;
    }

    td {
      padding: 12px 15px;
      text-align: left;
      border-bottom: 1px solid #eee;
      color: var(--text-primary);
    }

    tr:hover {
      background-color: rgba(75, 171, 177, 0.05);
    }

    .toppers ul {
      list-style: none;
      padding: 0;
    }

    .toppers li {
      padding: 12px 0;
      font-weight: 500;
      border-bottom: 1px solid #eee;
      display: flex;
      justify-content: space-between;
    }

    .toppers li:last-child {
      border-bottom: none;
    }

    .announcements div {
      background: #fff3e0;
      padding: 20px;
      border-radius: 12px;
      margin-bottom: 15px;
      color: #e65100;
      font-weight: 500;
    }

    h2 {
      color: var(--primary-color);
      margin: 30px 0 15px;
      font-size: 22px;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    /* Responsive Design */
    @media (max-width: 1200px) {
      .card, .chart-container {
        min-width: 180px;
      }
    }
    
    @media (max-width: 992px) {
      .main {
        padding: 30px;
      }
      
      .header {
        padding: 20px;
      }
      
      h1 {
        font-size: 24px;
      }
      
      .card h3 {
        font-size: 28px;
      }
    }
    
    @media (max-width: 768px) {
      .main {
        margin-left: 0;
        width: 100%;
        padding: 25px 20px;
      }
      
      .sidebar:not(.closed) ~ .main {
        margin-left: 320px;
        width: calc(100% - 320px);
      }
      
      .cards, .charts {
        flex-direction: column;
      }
      
      .card, .chart-container {
        width: 100%;
      }
    }
    
    @media (max-width: 576px) {
      .main {
        padding: 20px 15px;
      }
      
      .header {
        padding: 15px;
      }
      
      h1 {
        font-size: 22px;
      }
      
      h2 {
        font-size: 20px;
      }
      
      .card {
        padding: 20px;
      }
    }

    /* Loading Animation */
    .loading {
      position: relative;
      overflow: hidden;
    }
    
    .loading::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.5), transparent);
      animation: loading 1.5s infinite;
    }
    
    @keyframes loading {
      0% { transform: translateX(-100%); }
      100% { transform: translateX(100%); }
    }

     .logout-btn {
  margin-top: auto; /* Pushes it to the bottom */
  color: #4BABB1 !important; /* Red color for logout */
}

.logout-btn:hover {
  color: #4BABB1 !important;
  background: rgba(75, 171, 177, 0.08);
}

.logout-btn i {
  color: #4BABB1 !important;
}

.logout-btn:hover i {
  color: #4BABB1 !important;
}
  </style>
</head>
<body>
  <!-- üî• Sidebar HTML -->
  <div class="sidebar">
    <div class="sidebar-header">
      <div class="project-name">
        <i class="fas fa-chalkboard-teacher"></i>
        <span>Organize Portal</span>
      </div>
    </div>
    
    <div class="menu-items">
      <a href="HomeOrganization.html" class="menu-item active">
        <i class="fas fa-home"></i>
        <span>Home</span>
      </a>
      <a href="ProfileOrganization.html" class="menu-item">
        <i class="fas fa-calendar-alt"></i>
        <span>Profile</span>
      </a>
      <a href="datasearchOrganization.html" class="menu-item">
        <i class="fas fa-users"></i>
        <span>Data Search</span>
      </a>
      <a href="NewsOrganization.html" class="menu-item">
        <i class="fas fa-envelope"></i>
        <span>News</span>
      </a>
      <a href="SelectOrganization.html" class="menu-item">
        <i class="fas fa-cog"></i>
        <span>Creation</span>
      </a>
    </div>

    <a href="#" class="menu-item logout-btn" id="logout-btn">
  <i class="fas fa-sign-out-alt"></i>
  <span>Logout</span>
</a>
  </div>

  <button class="toggle-btn" onclick="toggleSidebar()">
    <i class="fas fa-bars"></i>
  </button>
  
  <!-- Main Content Area -->
  <div class="main">
    <div class="header">
      <h1>Organization Dashboard</h1>
      <p>Welcome to your management portal</p>
    </div>
    
    <div class="card">
      <div class="profile-section">
        <img class="profile-img" id="profileImg" src="" alt="Organizer Photo">
        <h2 id="organizerName">Loading...</h2>
        <p>Manage your organization's Work</p>
        <a href="ProfileOrganization.html" class="profile-btn">View Full Profile</a>
      </div>
    </div>
    
    <div class="charts">
      <div class="chart-container">
        <canvas id="studentsChart"></canvas>
        <div class="chart-label" id="studentsLabel"></div>
        <p>Students Attendance</p>
      </div>
      <div class="chart-container">
        <canvas id="teachersChart"></canvas>
        <div class="chart-label" id="teachersLabel"></div>
        <p>Teachers Attendance</p>
      </div>
      <div class="chart-container">
        <canvas id="activitiesChart"></canvas>
        <div class="chart-label" id="activitiesLabel"></div>
        <p>Activities Participation</p>
      </div>
    </div>
    
    <div class="toppers">
      <h2><i class="fas fa-trophy"></i> Top Students</h2>
      <ul>
        <li>Fatima El-Sayed <span>98%</span></li>
        <li>Mohamed Hassan <span>96%</span></li>
        <li>Sara Ibrahim <span>94%</span></li>
        <li>Ahmed Mahmoud <span>93%</span></li>
        <li>Lina Samir <span>92%</span></li>
      </ul>
    </div>

    <div class="library">
      <h2><i class="fas fa-book"></i> Library Resources</h2>
      <table>
        <thead>
          <tr>
            <th>Title</th>
            <th>Author</th>
            <th>Category</th>
            <th>Availability</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Physics Basics</td>
            <td>Dr. Sameh</td>
            <td>Science</td>
            <td><span class="available">Available</span></td>
          </tr>
          <tr>
            <td>Grammar Rules</td>
            <td>Mr. Hani</td>
            <td>English</td>
            <td><span class="available">Available</span></td>
          </tr>
          <tr>
            <td>History of Egypt</td>
            <td>Prof. Mona</td>
            <td>History</td>
            <td><span class="unavailable">Checked Out</span></td>
          </tr>
          <tr>
            <td>Mathematics Today</td>
            <td>Dr. Ali</td>
            <td>Math</td>
            <td><span class="available">Available</span></td>
          </tr>
        </tbody>
      </table>
    </div>

    <div class="announcements">
      <h2><i class="fas fa-bullhorn"></i> Announcements</h2>
      <div>
        <i class="fas fa-exclamation-circle"></i> New summer course available for Science & Technology!
      </div>
      <div>
        <i class="fas fa-calendar-alt"></i> Parent-Teacher meetings scheduled for next week
      </div>
      <div>
        <i class="fas fa-trophy"></i> Annual sports day on 15th of this month
      </div>
    </div>
  </div>

  <script>
   // ÿ≠ŸÅÿ∏ ÿ≠ÿßŸÑÿ© ÿßŸÑŸÄ sidebar ŸÅŸä localStorage
function toggleSidebar() {
  const sidebar = document.querySelector('.sidebar');
  const main = document.querySelector('.main');

  sidebar.classList.toggle('closed');
  
  if (sidebar.classList.contains('closed')) {
    main.style.marginLeft = '0';
    main.style.maxWidth = '100%';
  } else {
    main.style.marginLeft = '300px';
    main.style.maxWidth = 'calc(100% - 300px)';
  }

  localStorage.setItem('sidebarClosed', sidebar.classList.contains('closed'));
}

// ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ≠ÿßŸÑÿ© ÿßŸÑŸÖÿ≠ŸÅŸàÿ∏ÿ© ÿπŸÜÿØ ŸÅÿ™ÿ≠ ÿßŸÑÿµŸÅÿ≠ÿ©
document.addEventListener('DOMContentLoaded', function() {
  // ÿ™ÿ≠ŸÖŸäŸÑ ÿ≠ÿßŸÑÿ© ÿßŸÑÿ¥ÿ±Ÿäÿ∑ ÿßŸÑÿ¨ÿßŸÜÿ®Ÿä
  const savedState = localStorage.getItem('sidebarClosed');
  const sidebar = document.querySelector('.sidebar');
  const main = document.querySelector('.main');

  if (savedState === 'true') {
    sidebar.classList.add('closed');
    main.style.marginLeft = '0';
    main.style.maxWidth = '100%';
  }

  // ÿ™ÿ≠ÿØŸäÿØ ÿßŸÑÿπŸÜÿµÿ± ÿßŸÑŸÜÿ¥ÿ∑ ŸÅŸä ÿßŸÑŸÇÿßÿ¶ŸÖÿ©
  const currentPage = window.location.pathname.split('/').pop();
  document.querySelectorAll('.menu-item').forEach(item => {
    item.classList.remove('active');
    if (item.getAttribute('href') === currentPage) {
      item.classList.add('active');
    }
  });

  // ÿ¨ŸÑÿ® ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÖŸÜÿ∏ŸÖ Ÿàÿπÿ±ÿ∂Ÿáÿß
  fetchOrganizerData();
  
  // ÿ™ŸáŸäÿ¶ÿ© ÿßŸÑÿ±ÿ≥ŸàŸÖ ÿßŸÑÿ®ŸäÿßŸÜŸäÿ©
  initializeCharts();
});

// ÿ¨ŸÑÿ® ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÖŸÜÿ∏ŸÖ Ÿàÿπÿ±ÿ∂Ÿáÿß ŸÅŸä ÿßŸÑŸáŸàŸÖ
function fetchOrganizerData() {
  const token = localStorage.getItem('token');
  const id = new URLSearchParams(window.location.search).get('id') || '';
  const apiUrl = `http://54.242.19.19:3000/api/organizers/:id`;

  fetch(apiUrl, {
    method: 'GET',
    headers: {
      'Authorization': `Bearer ${token}`,
      'Content-Type': 'application/json'
    }
  })
  .then(response => {
    if (!response.ok) throw new Error('Network response was not ok');
    return response.json();
  })
  .then(data => {
    // ÿπÿ±ÿ∂ ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÖŸÜÿ∏ŸÖ ŸÅŸä ÿµŸÅÿ≠ÿ© ÿßŸÑŸáŸàŸÖ
    document.getElementById('organizerName').textContent = data.userName || 'Organizer';
    console.log(data.photo)
    if (data.photo) {
      document.getElementById('profileImg').src = data.photo;
    } 
    /*else {
      // ÿπÿ±ÿ∂ ÿßŸÑÿ£ÿ≠ÿ±ŸÅ ÿßŸÑÿ£ŸàŸÑŸâ ÿ•ÿ∞ÿß ŸÑŸÖ ÿ™Ÿàÿ¨ÿØ ÿµŸàÿ±ÿ©
      const initials = (data.userName || 'OO').substring(0, 2).toUpperCase();
      document.getElementById('profileImg').innerHTML = initials;
    }*/
  })
  .catch(error => {
    console.error("Error fetching organizer data:", error);
    document.getElementById('organizerName').textContent = 'Organizer';
  });
}

// ÿ™ŸáŸäÿ¶ÿ© ÿßŸÑÿ±ÿ≥ŸàŸÖ ÿßŸÑÿ®ŸäÿßŸÜŸäÿ©
function initializeCharts() {
  // ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÅÿ™ÿ±ÿßÿ∂Ÿäÿ© - ŸäŸÖŸÉŸÜ ÿßÿ≥ÿ™ÿ®ÿØÿßŸÑŸáÿß ÿ®ÿ®ŸäÿßŸÜÿßÿ™ ÿ≠ŸÇŸäŸÇŸäÿ© ŸÖŸÜ API
  const chartsData = {
    students: { present: 490, absent: 46, color: '#4BABB1', label: 'students' },
    teachers: { present: 110, absent: 9, color: '#2196F3', label: 'teachers' },
    activities: { present: 320, absent: 80, color: '#4CAF50', label: 'activities' }
  };

  // ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑÿ±ÿ≥ŸàŸÖ ÿßŸÑÿ®ŸäÿßŸÜŸäÿ©
  Object.keys(chartsData).forEach(key => {
    const { present, absent, color, label } = chartsData[key];
    const total = present + absent;
    const percent = Math.round((present / total) * 100);
    const ctx = document.getElementById(`${label}Chart`).getContext('2d');

    new Chart(ctx, {
      type: 'doughnut',
      data: {
        labels: ['Present', 'Absent'],
        datasets: [{
          data: [present, absent],
          backgroundColor: [color, '#eee'],
          borderWidth: 1
        }]
      },
      options: {
        cutout: '70%',
        plugins: { 
          legend: { display: false },
          tooltip: {
            callbacks: {
              label: function(context) {
                const value = context.raw;
                const percentage = Math.round((value / total) * 100);
                return `${context.label}: ${value} (${percentage}%)`;
              }
            }
          }
        }
      }
    });

    document.getElementById(`${label}Label`).textContent = `${percent}%`;
  });
}

 // Logout functionality
document.getElementById('logout-btn').addEventListener('click', function(e) {
  e.preventDefault();
  
  // Add your logout logic here
  // For example, redirect to home page:
  window.location.href = '../index.html'; // Change to your home page URL
  
  // If you need to clear session/local storage:
  // localStorage.clear();
  // sessionStorage.clear();
});
  </script>
</body>
</html>